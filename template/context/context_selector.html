<div ng-controller="contextCtrl" class="context-module module">

	<h4> Context
		<span ng-click="data.hide = !data.hide" 
			class="glyphicon" ng-class="{'glyphicon-plus':data.hide, 'glyphicon-minus':!data.hide}">
		</span>
	 </h4>

	<div ng-if="!data.hide">
		<div class="input-group">
			<span class="input-group-addon">Context</span>
			<select ng-model="data.contextIdx" ui-select2 class="form-control" ng-change="selectContext()">
				<option ng-repeat="context in data.contextList" value ="{{ $index }}" >
					{{ context.fields.contextName[0] }}
				</option>  
			</select>
		</div>

		<div class="margin-top">
			<button class="btn btn-default" ng-click="updateContext()" title="Mettre a jour le context">
				<span class="glyphicon glyphicon-refresh"></span>
			</button>

			<button class="btn btn-default" ng-click="sendContext()" title="Sauvergarder le context">
				<span class="glyphicon glyphicon-floppy-disk"></span>
			</button>	

			<button class="btn btn-default" ng-click="showNewContext = !showNewContext">
				<span ng-if="!showNewContext" class="glyphicon glyphicon-plus-sign" title="Nouveau context">
				</span>
				<span ng-if="showNewContext" class="glyphicon glyphicon-ban-circle" title="close">
				</span>
			</button>

			<button class="btn btn-default" ng-click="setDefaultContext()" title="Etablir comme context par dÃ©faut">
				<span class="glyphicon glyphicon-star"></span>
			</button>	
		</div>

		<div class="margin-top" ng-show="showNewContext">
			<div class="input-group">
				<span class="input-group-addon">Context's name</span>
				<input type="text" ng-model="newContextName" class="form-control">
			</div>
			<button class="btn btn-default margin-top" ng-click="saveNewContext()" title="Valider">
				<span class="glyphicon glyphicon-ok"></span>
			</button>
		</div>
	</div>
</div>
<hr/>